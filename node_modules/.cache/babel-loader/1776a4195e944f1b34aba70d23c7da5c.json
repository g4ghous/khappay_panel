{"ast":null,"code":"var _jsxFileName = \"D:\\\\Office-Work\\\\Panel\\\\khappay_panel\\\\src\\\\component\\\\TravelLogin.js\";\nimport React, { Component } from \"react\"; // import logo2 from \"../component/assets/\";\n\nimport { Serverurl } from \"../Common/ServerUrl\";\nimport axios from \"axios\";\nimport Button from \"reactstrap-button-loader\";\nimport swal from \"sweetalert\";\nimport logo3 from \"../../src/component/assets/images/logo_khappay.png\";\nexport class TravelLogin extends Component {\n  constructor(props) {\n    super(props);\n\n    this.handleEmailChange = event => {\n      this.setState({\n        [event.target.name]: event.target.value,\n        emailError: \"\"\n      });\n    };\n\n    this.onKeyDown = event => {\n      // 'keypress' event misbehaves on mobile so we track 'Enter' key via 'keydown' event\n      if (event.key === \"Enter\") {\n        event.preventDefault();\n        event.stopPropagation();\n        this.Login();\n      }\n    };\n\n    this.state = {\n      data: [],\n      email: \"\",\n      password: \"\",\n      errorText: \"\",\n      emailError: \"\",\n      passwordError: \"\",\n      errors: \"\",\n      loading: false\n    };\n  }\n\n  emailInput(e) {\n    this.setState({\n      email: e.target.value\n    });\n  }\n\n  PasswordInput(e) {\n    this.setState({\n      password: e.target.value,\n      passwordError: \"\"\n    });\n  }\n\n  Login(e) {\n    var data;\n    e.preventDefault();\n    var validation = true;\n    const emailsyntax = /^\\w+([\\.-]?\\w+)*@\\w+([\\.-]?\\w+)*(\\.\\w{2,3})+$/;\n\n    if (this.state.password == \"\") {\n      this.setState({\n        passwordError: \"*Password is required\"\n      });\n      validation = false;\n    }\n\n    if (!emailsyntax.test(this.state.email)) {\n      validation = false;\n      this.setState({\n        emailError: \"* Incorrect Email format.\"\n      });\n    }\n\n    if (this.state.email == \"\") {\n      this.setState({\n        emailError: \"*Email is required\"\n      });\n      validation = false;\n    }\n\n    if (validation == true) {\n      var data = {\n        email: this.state.email,\n        password: this.state.password\n      };\n      this.setState({\n        loading: true\n      });\n      var error = document.getElementById(\"err\");\n\n      if (this.state.email === \"\" || this.state.password === \"\") {\n        this.setState({\n          error: \"Please fill fields carefully\"\n        });\n        error.classList.add(\"errorMsg\");\n        setTimeout(() => {\n          error.classList.remove(\"errorMsg\");\n          this.setState({\n            error: \"\"\n          });\n        }, 3000);\n      } else {\n        var data;\n        axios({\n          method: \"post\",\n          url: Serverurl + \"login\",\n          data: data\n        }).then(res => {\n          //   var validation = false;\n          //   console.log(\"mera res\", res.data.Data.user_type);\n          // if (res.data.Data.user_type == \"admin\") {\n          //   validation = true;\n          // this.setState({\n          //     loading: true\n          // })\n          // setTimeout(() => {\n          //     this.setState({\n          //         loading: false\n          //     })\n          //     this.setState((willSuccess) => {\n          //         if (willSuccess) {\n          //             swal(\"error_message[0]\", {\n          //                 icon: \"warning\",\n          //             });\n          //         } else {\n          //             swal(\"Your imaginary file is safe!\");\n          //         }\n          //     })\n          // window.location.href = \"/\"\n          // }, 3000)\n          console.log(\"res\", res.data.success.token);\n          console.log(\"Token\", res.data.token);\n          localStorage.setItem(\"token\", res.data.success.token);\n          window.location.href = \"/component/Dashboard\"; // }\n          // if (validation == false){\n          // this.setState({\n          //     errorText: \"*Incorrect email or password\"\n          // })\n          // }\n\n          this.setState({\n            data: res.data,\n            loading: false\n          });\n\n          if (res.data.status === true) {\n            // localStorage.setItem(\"userId\", res.data.success.token);\n            localStorage.setItem(\"email\", res.data.Data.email);\n            localStorage.setItem(\"data\", res.data);\n          } //   localStorage.setItem(\"userId\", res.data.success.token);\n          // axios({\n          //     method: 'get',\n          //     url: Serverurl + 'user',\n          //     headers: {\n          //         Authorization: 'Bearer' + ' ' + res.data.data.access_token\n          //     }\n          // })\n          // .then((response) => {\n          //     console.log('User', response.data.data)\n          //     // console.log(\"Type:\", response.data.data.user_type)\n          //     console.log(\"userId:\", response.data.data.id)\n          //     this.setState((res) => {\n          //         if (res.status == false) {\n          //             this.setState({\n          //                 errorText: data.message\n          //             })\n          //             if (data.errors) {\n          //                 if (data.errors.email) {\n          //                     if (data.errors.email.ERR_00001) {\n          //                         this.setState({\n          //                             emailError: '* Email is required'\n          //                         })\n          //                     }\n          //                     if (data.errors.email.ERR_00005) {\n          //                         this.setState({\n          //                             emailError: '* Email is invalid'\n          //                         })\n          //                     }\n          //                 }\n          //                 if (data.errors.password) {\n          //                     if (data.errors.password.ERR_00001) {\n          //                         this.setState({\n          //                             passwordError: '* Password is required'\n          //                         })\n          //                     }\n          //                 }\n          //             }\n          //         }\n          //     })\n          // })\n          // .catch((val) => {\n          //     console.log(\"error:\", val)\n          // })\n\n        }); // .catch((err) => {\n        //     console.log({ err })\n        //     if (err) {\n        //         error.classList.add('errorMsg');\n        //         this.setState({\n        //             error: 'Login Failed! Please try again',\n        //             loading: true\n        //         })\n        //         error.classList.add('errorMsg');\n        //         setTimeout(() => {\n        //             error.classList.remove('errorMsg')\n        //             this.setState({\n        //                 error: '',\n        //                 loading: false\n        //             })\n        //         }, 3000)\n        //     }\n        // })\n      }\n    }\n  }\n\n  render() {\n    // var userId = localStorage.getItem('/');\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 233,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 234,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"accountbg\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 235,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"wrapper-page\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 236,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"card1\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 237,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"card-body\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 238,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"text-center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 240,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"a\", {\n      className: \"logo logo-admin\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 241,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      src: logo3,\n      height: \"70\",\n      alt: \"logo\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 242,\n        columnNumber: 21\n      }\n    }))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"px-3 pb-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 246,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"form\", {\n      className: \"form-horizontal m-t-20\",\n      action: \"index.html\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 247,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 248,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 249,\n        columnNumber: 23\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      className: \"form-control\",\n      type: \"email\",\n      name: \"email\",\n      onChange: this.handleEmailChange.bind(this),\n      placeholder: \"Email\",\n      required: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 250,\n        columnNumber: 25\n      }\n    }))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 261,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 262,\n        columnNumber: 23\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      className: \"form-control\",\n      type: \"password\",\n      name: \"password\",\n      onChange: this.PasswordInput.bind(this),\n      placeholder: \"Password\",\n      required: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 263,\n        columnNumber: 25\n      }\n    }))), this.state.errorText ? /*#__PURE__*/React.createElement(\"p\", {\n      style: {\n        color: \"red\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 275,\n        columnNumber: 23\n      }\n    }, this.state.errorText) : null, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group text-center row m-t-20\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 277,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 278,\n        columnNumber: 23\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      className: \"btn btn-danger btn-block waves-effect waves-light\",\n      type: \"submit\",\n      onClick: this.Login.bind(this),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 279,\n        columnNumber: 25\n      }\n    }, \"Log In\"))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group m-t-10 mb-0 row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 289,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-sm-12 m-t-20 my-forgot\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 290,\n        columnNumber: 23\n      }\n    })))))))));\n  }\n\n}\nexport default TravelLogin;","map":{"version":3,"sources":["D:/Office-Work/Panel/khappay_panel/src/component/TravelLogin.js"],"names":["React","Component","Serverurl","axios","Button","swal","logo3","TravelLogin","constructor","props","handleEmailChange","event","setState","target","name","value","emailError","onKeyDown","key","preventDefault","stopPropagation","Login","state","data","email","password","errorText","passwordError","errors","loading","emailInput","e","PasswordInput","validation","emailsyntax","test","error","document","getElementById","classList","add","setTimeout","remove","method","url","then","res","console","log","success","token","localStorage","setItem","window","location","href","status","Data","render","bind","color"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\n// import logo2 from \"../component/assets/\";\r\nimport { Serverurl } from \"../Common/ServerUrl\";\r\nimport axios from \"axios\";\r\nimport Button from \"reactstrap-button-loader\";\r\nimport swal from \"sweetalert\";\r\nimport logo3 from \"../../src/component/assets/images/logo_khappay.png\";\r\n\r\nexport class TravelLogin extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      data: [],\r\n      email: \"\",\r\n      password: \"\",\r\n      errorText: \"\",\r\n      emailError: \"\",\r\n      passwordError: \"\",\r\n      errors: \"\",\r\n      loading: false,\r\n    };\r\n  }\r\n\r\n  emailInput(e) {\r\n    this.setState({\r\n      email: e.target.value,\r\n    });\r\n  }\r\n\r\n  handleEmailChange = (event) => {\r\n    this.setState({\r\n      [event.target.name]: event.target.value,\r\n      emailError: \"\",\r\n    });\r\n  };\r\n\r\n  PasswordInput(e) {\r\n    this.setState({\r\n      password: e.target.value,\r\n      passwordError: \"\",\r\n    });\r\n  }\r\n\r\n  Login(e) {\r\n    var data;\r\n\r\n    e.preventDefault();\r\n    var validation = true;\r\n\r\n    const emailsyntax = /^\\w+([\\.-]?\\w+)*@\\w+([\\.-]?\\w+)*(\\.\\w{2,3})+$/;\r\n\r\n    if (this.state.password == \"\") {\r\n      this.setState({\r\n        passwordError: \"*Password is required\",\r\n      });\r\n      validation = false;\r\n    }\r\n\r\n    if (!emailsyntax.test(this.state.email)) {\r\n      validation = false;\r\n      this.setState({\r\n        emailError: \"* Incorrect Email format.\",\r\n      });\r\n    }\r\n\r\n    if (this.state.email == \"\") {\r\n      this.setState({\r\n        emailError: \"*Email is required\",\r\n      });\r\n      validation = false;\r\n    }\r\n\r\n    if (validation == true) {\r\n      var data = {\r\n        email: this.state.email,\r\n        password: this.state.password,\r\n      };\r\n\r\n      this.setState({\r\n        loading: true,\r\n      });\r\n\r\n      var error = document.getElementById(\"err\");\r\n      if (this.state.email === \"\" || this.state.password === \"\") {\r\n        this.setState({\r\n          error: \"Please fill fields carefully\",\r\n        });\r\n        error.classList.add(\"errorMsg\");\r\n        setTimeout(() => {\r\n          error.classList.remove(\"errorMsg\");\r\n          this.setState({\r\n            error: \"\",\r\n          });\r\n        }, 3000);\r\n      } else {\r\n        var data;\r\n        axios({\r\n          method: \"post\",\r\n          url: Serverurl + \"login\",\r\n          data: data,\r\n        }).then((res) => {\r\n          //   var validation = false;\r\n          //   console.log(\"mera res\", res.data.Data.user_type);\r\n          // if (res.data.Data.user_type == \"admin\") {\r\n          //   validation = true;\r\n          // this.setState({\r\n          //     loading: true\r\n          // })\r\n          // setTimeout(() => {\r\n          //     this.setState({\r\n          //         loading: false\r\n          //     })\r\n          //     this.setState((willSuccess) => {\r\n          //         if (willSuccess) {\r\n          //             swal(\"error_message[0]\", {\r\n          //                 icon: \"warning\",\r\n          //             });\r\n          //         } else {\r\n          //             swal(\"Your imaginary file is safe!\");\r\n          //         }\r\n          //     })\r\n          // window.location.href = \"/\"\r\n          // }, 3000)\r\n          console.log(\"res\", res.data.success.token);\r\n          console.log(\"Token\", res.data.token);\r\n          localStorage.setItem(\"token\", res.data.success.token);\r\n          window.location.href = \"/component/Dashboard\";\r\n          // }\r\n          // if (validation == false){\r\n          // this.setState({\r\n          //     errorText: \"*Incorrect email or password\"\r\n          // })\r\n          // }\r\n\r\n          this.setState({\r\n            data: res.data,\r\n            loading: false,\r\n          });\r\n          if (res.data.status === true) {\r\n            // localStorage.setItem(\"userId\", res.data.success.token);\r\n            localStorage.setItem(\"email\", res.data.Data.email);\r\n            localStorage.setItem(\"data\", res.data);\r\n          }\r\n\r\n          //   localStorage.setItem(\"userId\", res.data.success.token);\r\n\r\n          // axios({\r\n          //     method: 'get',\r\n          //     url: Serverurl + 'user',\r\n          //     headers: {\r\n          //         Authorization: 'Bearer' + ' ' + res.data.data.access_token\r\n          //     }\r\n\r\n          // })\r\n\r\n          // .then((response) => {\r\n          //     console.log('User', response.data.data)\r\n          //     // console.log(\"Type:\", response.data.data.user_type)\r\n          //     console.log(\"userId:\", response.data.data.id)\r\n\r\n          //     this.setState((res) => {\r\n          //         if (res.status == false) {\r\n          //             this.setState({\r\n          //                 errorText: data.message\r\n          //             })\r\n          //             if (data.errors) {\r\n          //                 if (data.errors.email) {\r\n          //                     if (data.errors.email.ERR_00001) {\r\n          //                         this.setState({\r\n\r\n          //                             emailError: '* Email is required'\r\n          //                         })\r\n          //                     }\r\n\r\n          //                     if (data.errors.email.ERR_00005) {\r\n          //                         this.setState({\r\n\r\n          //                             emailError: '* Email is invalid'\r\n          //                         })\r\n          //                     }\r\n          //                 }\r\n          //                 if (data.errors.password) {\r\n          //                     if (data.errors.password.ERR_00001) {\r\n          //                         this.setState({\r\n\r\n          //                             passwordError: '* Password is required'\r\n          //                         })\r\n          //                     }\r\n          //                 }\r\n          //             }\r\n          //         }\r\n          //     })\r\n\r\n          // })\r\n          // .catch((val) => {\r\n          //     console.log(\"error:\", val)\r\n          // })\r\n        });\r\n        // .catch((err) => {\r\n        //     console.log({ err })\r\n        //     if (err) {\r\n        //         error.classList.add('errorMsg');\r\n        //         this.setState({\r\n        //             error: 'Login Failed! Please try again',\r\n        //             loading: true\r\n        //         })\r\n        //         error.classList.add('errorMsg');\r\n        //         setTimeout(() => {\r\n        //             error.classList.remove('errorMsg')\r\n        //             this.setState({\r\n        //                 error: '',\r\n        //                 loading: false\r\n        //             })\r\n        //         }, 3000)\r\n        //     }\r\n        // })\r\n      }\r\n    }\r\n  }\r\n\r\n  onKeyDown = (event) => {\r\n    // 'keypress' event misbehaves on mobile so we track 'Enter' key via 'keydown' event\r\n    if (event.key === \"Enter\") {\r\n      event.preventDefault();\r\n      event.stopPropagation();\r\n      this.Login();\r\n    }\r\n  };\r\n\r\n  render() {\r\n    // var userId = localStorage.getItem('/');\r\n    return (\r\n      <div>\r\n        <div>\r\n          <div className=\"accountbg\"></div>\r\n          <div className=\"wrapper-page\">\r\n            <div className=\"card1\">\r\n              <div className=\"card-body\">\r\n                {/* <div id=\"err\">{this.state.error}</div> */}\r\n                <div className=\"text-center\">\r\n                  <a className=\"logo logo-admin\">\r\n                    <img src={logo3} height=\"70\" alt=\"logo\" />\r\n                  </a>\r\n                </div>\r\n\r\n                <div className=\"px-3 pb-3\">\r\n                  <form className=\"form-horizontal m-t-20\" action=\"index.html\">\r\n                    <div className=\"form-group row\">\r\n                      <div className=\"col-12\">\r\n                        <input\r\n                          className=\"form-control\"\r\n                          type=\"email\"\r\n                          name=\"email\"\r\n                          onChange={this.handleEmailChange.bind(this)}\r\n                          placeholder=\"Email\"\r\n                          required\r\n                        />\r\n                      </div>\r\n                    </div>\r\n\r\n                    <div className=\"form-group row\">\r\n                      <div className=\"col-12\">\r\n                        <input\r\n                          className=\"form-control\"\r\n                          type=\"password\"\r\n                          name=\"password\"\r\n                          onChange={this.PasswordInput.bind(this)}\r\n                          placeholder=\"Password\"\r\n                          required\r\n                        />\r\n                      </div>\r\n                    </div>\r\n\r\n                    {this.state.errorText ? (\r\n                      <p style={{ color: \"red\" }}>{this.state.errorText}</p>\r\n                    ) : null}\r\n                    <div className=\"form-group text-center row m-t-20\">\r\n                      <div className=\"col-12\">\r\n                        <button\r\n                          className=\"btn btn-danger btn-block waves-effect waves-light\"\r\n                          type=\"submit\"\r\n                          onClick={this.Login.bind(this)}\r\n                        >\r\n                          Log In\r\n                        </button>\r\n                      </div>\r\n                    </div>\r\n\r\n                    <div className=\"form-group m-t-10 mb-0 row\">\r\n                      <div className=\"col-sm-12 m-t-20 my-forgot\">\r\n                        {/* <a href=\"/component/TravelForgot\" className=\"text-muted\"><i className=\"mdi mdi-lock\"></i> <small>Forgot your password ?</small></a> */}\r\n                      </div>\r\n                    </div>\r\n                  </form>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default TravelLogin;\r\n"]},"metadata":{},"sourceType":"module"}